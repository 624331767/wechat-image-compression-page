import{h as g}from"./request-aa259f50.js";import{_ as x}from"./index-32d6148d.js";const w=window.Vue.renderList,h=window.Vue.Fragment,a=window.Vue.openBlock,c=window.Vue.createElementBlock,i=window.Vue.toDisplayString,D=window.Vue.normalizeClass,s=window.Vue.createElementVNode,E=window.Vue.createCommentVNode,z={class:"downloads-page"},A={class:"tabs"},B=["onClick"],L={key:0,class:"video-list"},N=["onClick"],S={class:"video-cover"},F=["src"],I={class:"video-title"},$={class:"video-description"},j={class:"video-category"},M={class:"video-views"},T={key:1,class:"no-videos"},U={key:2,class:"pagination-controls"},K=["disabled"],Y=["disabled"],d=window.Vue.ref,q=window.Vue.onMounted,G=window.VueRouter.useRoute,H=window.VueRouter.useRouter,J={__name:"videoPage",setup(O){G();const m=H(),p="https://render.setwhat.dpdns.org",_=d([]),r=d(null),n=d(1),y=d(10),l=d(1),u=d([]),V=async()=>{try{const e=await g.getData("/api/categories");if(e.code===200&&Array.isArray(e.data)&&(_.value=e.data,_.value.length>0)){const t=_.value[0];r.value=t,await v(t.id)}}catch(e){}},v=async e=>{try{const t={page:n.value,pageSize:y.value};e&&(t.categoryId=e);const o=await g.getData("/api/videos",{...t});o.code===200&&Array.isArray(o.data)?(u.value=o.data,l.value=o.pagination?.totalPages||1):(u.value=[],l.value=1)}catch(t){u.value=[],l.value=1}},f=e=>(p+e,e?p+e:"https://116.205.244.83:27884/down/KhjE0hDYpsFi.jpg"),k=e=>{r.value=e,n.value=1,v(e.id)},b=()=>{n.value>1&&(n.value--,v(r.value.id))},C=()=>{n.value<l.value&&(n.value++,v(r.value.id))},P=e=>{e.id,m.push({path:`/videoPlay/${e.id}`})};return q(()=>{V()}),(e,t)=>(a(),c("section",z,[s("div",A,[(a(!0),c(h,null,w(_.value,o=>(a(),c("button",{key:o.id,class:D(["tab-button",{active:r.value&&r.value.id===o.id}]),onClick:R=>k(o)},i(o.name),11,B))),128))]),u.value.length>0?(a(),c("div",L,[(a(!0),c(h,null,w(u.value,o=>(a(),c("div",{key:o.id,class:"video-card",onClick:R=>P(o)},[s("div",S,[s("img",{src:f(o.cover_url),alt:"视频封面"},null,8,F)]),s("h3",I,i(o.title),1),s("p",$,i(o.description),1),s("p",j,"分类："+i(o.category),1),s("p",M,"播放量："+i(o.view_count),1)],8,N))),128))])):(a(),c("div",T,t[0]||(t[0]=[s("p",null,"暂无视频内容。",-1)]))),l.value>1?(a(),c("div",U,[s("button",{onClick:b,disabled:n.value===1},"上一页",8,K),s("span",null,"第 "+i(n.value)+" 页 / 共 "+i(l.value)+" 页",1),s("button",{onClick:C,disabled:n.value===l.value},"下一页",8,Y)])):E("",!0)]))}},X=x(J,[["__scopeId","data-v-748d73b6"]]);export{X as default};
