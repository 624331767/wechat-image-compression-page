import{h as p}from"./request-aa259f50.js";import{_ as x}from"./index-ff525c68.js";const g=window.Vue.renderList,w=window.Vue.Fragment,a=window.Vue.openBlock,c=window.Vue.createElementBlock,l=window.Vue.toDisplayString,z=window.Vue.normalizeClass,t=window.Vue.createElementVNode,A=window.Vue.createCommentVNode,B={class:"downloads-page"},D={class:"tabs"},E=["onClick"],L={key:0,class:"video-list"},N=["onClick"],S={class:"video-cover"},$=["src"],F={class:"video-title"},M={class:"video-description"},T={class:"video-category"},U={class:"video-views"},I={key:1,class:"no-videos"},j={key:2,class:"pagination-controls"},q=["disabled"],G=["disabled"],d=window.Vue.ref,H=window.Vue.onMounted,J=window.VueRouter.useRoute,K=window.VueRouter.useRouter,O={__name:"videoPage",setup(Q){J();const h=K(),m="https://render.setwhat.dpdns.org",_=d([]),r=d(null),n=d(1),y=d(10),i=d(1),u=d([]),V=async()=>{try{const e=await p.getData("/api/categories");if(e.code===200&&Array.isArray(e.data)&&(_.value=e.data,_.value.length>0)){const s=_.value[0];r.value=s,await v(s.id)}}catch(e){}},v=async e=>{try{const s={page:n.value,pageSize:y.value};e&&(s.categoryId=e);const o=await p.getData("/api/videos",{...s});o.code===200&&Array.isArray(o.data)?(u.value=o.data,i.value=o.pagination?.totalPages||1):(u.value=[],i.value=1)}catch(s){u.value=[],i.value=1}},f=e=>(m+e,e),k=e=>{r.value=e,n.value=1,v(e.id)},C=()=>{n.value>1&&(n.value--,v(r.value.id))},b=()=>{n.value<i.value&&(n.value++,v(r.value.id))},P=e=>{e.id,h.push({path:`/videoPlay/${e.id}`})};return H(()=>{V()}),(e,s)=>(a(),c("section",B,[t("div",D,[(a(!0),c(w,null,g(_.value,o=>(a(),c("button",{key:o.id,class:z(["tab-button",{active:r.value&&r.value.id===o.id}]),onClick:R=>k(o)},l(o.name),11,E))),128))]),u.value.length>0?(a(),c("div",L,[(a(!0),c(w,null,g(u.value,o=>(a(),c("div",{key:o.id,class:"video-card",onClick:R=>P(o)},[t("div",S,[t("img",{src:f(o.cover_url),alt:"视频封面"},null,8,$)]),t("h3",F,l(o.title),1),t("p",M,l(o.description),1),t("p",T,"分类："+l(o.category),1),t("p",U,"播放量："+l(o.view_count),1)],8,N))),128))])):(a(),c("div",I,s[0]||(s[0]=[t("p",null,"暂无视频内容。",-1)]))),i.value>1?(a(),c("div",j,[t("button",{onClick:C,disabled:n.value===1},"上一页",8,q),t("span",null,"第 "+l(n.value)+" 页 / 共 "+l(i.value)+" 页",1),t("button",{onClick:b,disabled:n.value===i.value},"下一页",8,G)])):A("",!0)]))}},Y=x(O,[["__scopeId","data-v-03383f14"]]);export{Y as default};
