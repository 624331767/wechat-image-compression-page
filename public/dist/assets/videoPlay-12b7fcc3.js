import{h as x}from"./request-aa259f50.js";import{_ as B}from"./index-ff525c68.js";const d=window.Vue.toDisplayString,s=window.Vue.createElementVNode,a=window.Vue.resolveComponent,w=window.Vue.withCtx,n=window.Vue.createVNode,c=window.Vue.openBlock,i=window.Vue.createElementBlock;window.Vue.createCommentVNode;const N=window.Vue.createTextVNode,R={class:"player-page"},C={key:0,class:"status-container"},D={key:1,class:"status-container"},E={key:2,class:"player-content"},b={class:"video-wrapper"},I=["src"],P={class:"video-info"},$={class:"info-title"},S={class:"info-meta"},A={class:"info-desc"},M={key:3,class:"status-container"},u=window.Vue.ref,T=window.Vue.onMounted,j=window.VueRouter.useRoute,z=window.VueRouter.useRouter,L={__name:"videoPlay",setup(U){const m=j(),y=z(),t=u({}),r=u(!0),l=u(null),h="https://render.setwhat.dpdns.org",p=async()=>{r.value=!0,l.value=null;const _=m.params.id;try{const e=await x.getData(`/api/videos/${_}`);if(e.code===200&&e.data&&typeof e.data=="object"){const o=e.data;o.video_url&&!o.video_url.startsWith("http")&&(o.video_url=`${h}${o.video_url}`),t.value=o}else throw new Error(e.message||"数据格式不正确")}catch{l.value=`加载视频失败 (ID: ${_})，请稍后重试。`}finally{r.value=!1}},V=()=>{y.back()};return T(()=>{p()}),(_,e)=>{const o=a("el-page-header"),f=a("el-skeleton"),v=a("el-empty"),k=a("el-button"),g=a("el-divider");return c(),i("div",R,[n(o,{onBack:V,content:"视频播放"},{title:w(()=>[s("span",null,d(t.value.title||"加载中..."),1)]),_:1}),r.value?(c(),i("div",C,[n(f,{animated:"",rows:5})])):l.value?(c(),i("div",D,[n(v,{description:l.value},null,8,["description"]),n(k,{type:"primary",size:"small",onClick:p,style:{"margin-top":"16px"}},{default:w(()=>e[0]||(e[0]=[N(" 重试 ")])),_:1,__:[0]})])):t.value.video_url?(c(),i("div",E,[s("div",b,[s("video",{src:t.value.video_url,controls:"",autoplay:"",preload:"auto",class:"video-player"}," 您的浏览器不支持 video 标签。 ",8,I)]),s("div",P,[s("h1",$,d(t.value.title),1),s("p",S,"所属分类："+d(t.value.category||"未知"),1),n(g),s("p",A,d(t.value.description||"暂无简介"),1)])])):(c(),i("div",M,[n(v,{description:"视频地址无效，无法播放"})]))])}}},F=B(L,[["__scopeId","data-v-3e83e388"]]);export{F as default};
